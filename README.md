# Prime Apparel Exports

## Introduction

Prime Apparel Exports is a Django‑based backend for managing wholesale garment operations. It includes modules for users, leads, products, orders, suppliers, and more. The project is structured as a typical Django monorepo with each logical component as a separate app.

## Project Structure

```
prime impreal/
├─ backend/                # Django project settings and URLs
├─ users/                  # Custom user model, authentication APIs
├─ leads/                  # Lead management
├─ costings/               # Cost calculation utilities
├─ orders/                 # Order processing
├─ production/             # Production workflow
├─ suppliers/              # Supplier management
├─ purchase_orders/        # Purchase order handling
├─ products/               # Product catalogue and APIs
├─ media/                  # Uploaded media files
├─ staticfiles/            # Collected static assets (generated)
├─ db.sqlite3              # SQLite database (default)
├─ manage.py               # Django management script
└─ requirements.txt        # Python dependencies
```

## Prerequisites

- **Python 3.11+** (recommended)
- **pip** (Python package manager)
- **virtualenv** (optional but recommended)
- **Git** (to clone the repository)

## Installation

```bash
# Clone the repository
git clone <repository-url>
cd "prime impreal"

# Create and activate a virtual environment
python -m venv venv
# Windows
venv\Scripts\activate
# macOS/Linux
source venv/bin/activate

# Install dependencies
pip install -r requirements.txt
```

## Database Setup

The project uses SQLite by default.

```bash
# Apply migrations (creates db.sqlite3 if it does not exist)
python manage.py migrate
```

If you prefer another database (PostgreSQL, MySQL, etc.), update `backend/settings.py` `DATABASES` configuration accordingly and run migrations.

## Running the Development Server

```bash
# Start the server
python manage.py runserver
```

The API will be available at `http://127.0.0.1:8000/`. Example endpoints:
- `api/auth/` – authentication (login, token refresh)
- `api/leads/` – lead management
- `api/products/` – product catalogue

## Additional Notes

- **CORS**: Development settings allow all origins. Adjust `CORS_ALLOWED_ORIGINS` in `backend/settings.py` for production.
- **Media Files**: Uploaded files are stored in the `media/` directory and served automatically when `DEBUG=True`.
- **Static Files**: Run `python manage.py collectstatic` before deploying to production.
- **Environment Variables**: For production, move secret keys and sensitive settings to environment variables (e.g., using `python-decouple`).

### Email & Password Reset

The forgot-password flow now sends OTP codes over SMTP. Configure these environment variables before deploying:

| Variable | Description |
| --- | --- |
| `EMAIL_BACKEND` | (Optional) Override the email backend. Defaults to SMTP with a console fallback during development. |
| `EMAIL_HOST`, `EMAIL_PORT`, `EMAIL_USE_TLS` | SMTP host, port (defaults to 587), and TLS flag. |
| `EMAIL_HOST_USER`, `EMAIL_HOST_PASSWORD` | SMTP credentials used to send emails. |
| `DEFAULT_FROM_EMAIL` | Sender address shown in password reset emails. |
| `PASSWORD_RESET_OTP_EXPIRY_MINUTES` | Minutes before password reset OTPs expire (defaults to 10). |
| `PASSWORD_RESET_MAX_ATTEMPTS` | How many invalid OTP attempts are allowed (defaults to 5). |

---
*Generated by Antigravity AI assistant*
